"use strict";(self.webpackChunkmir_guia=self.webpackChunkmir_guia||[]).push([[3135],{3905:(e,n,a)=>{a.d(n,{Zo:()=>p,kt:()=>k});var o=a(7294);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,o,t=function(e,n){if(null==e)return{};var a,o,t={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var s=o.createContext({}),d=function(e){var n=o.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},p=function(e){var n=d(e.components);return o.createElement(s.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var a=e.components,t=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=d(a),m=t,k=c["".concat(s,".").concat(m)]||c[m]||u[m]||r;return a?o.createElement(k,l(l({ref:n},p),{},{components:a})):o.createElement(k,l({ref:n},p))}));function k(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var r=a.length,l=new Array(r);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:t,l[1]=i;for(var d=2;d<r;d++)l[d]=a[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},982:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var o=a(7462),t=(a(7294),a(3905));const r={},l="MongoDB",i={unversionedId:"bases-de-datos/mongodb",id:"bases-de-datos/mongodb",title:"MongoDB",description:"MongoDB es quiz\xe1 la base de datos no relacional m\xe1s popular de la actualidad. Est\xe1 dise\xf1ada para manejar grandes cantidades de datos distribu\xeddos en varios servidores.",source:"@site/docs/bases-de-datos/mongodb.md",sourceDirName:"bases-de-datos",slug:"/bases-de-datos/mongodb",permalink:"/docs/bases-de-datos/mongodb",draft:!1,editUrl:"https://github.com/makeitrealcamp/new-guides/tree/main/docs/bases-de-datos/mongodb.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"DDL",permalink:"/docs/bases-de-datos/ddl"}},s={},d=[{value:"Conceptos",id:"conceptos",level:2},{value:"Base de datos",id:"base-de-datos",level:3},{value:"Colecci\xf3n",id:"colecci\xf3n",level:3},{value:"Documento",id:"documento",level:3},{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:2},{value:"Instalaci\xf3n local",id:"instalaci\xf3n-local",level:3},{value:"mLab",id:"mlab",level:3},{value:"Utilizando el <code>mongo</code> Shell",id:"utilizando-el-mongo-shell",level:2},{value:"Creando y seleccionando bases de datos",id:"creando-y-seleccionando-bases-de-datos",level:3},{value:"Creando colecciones y documentos",id:"creando-colecciones-y-documentos",level:3},{value:"Listando y filtrando documentos",id:"listando-y-filtrando-documentos",level:3},{value:"Actualizando un documento",id:"actualizando-un-documento",level:3},{value:"Eliminando un documento",id:"eliminando-un-documento",level:3},{value:"Ordenar y agregar documentos",id:"ordenar-y-agregar-documentos",level:3},{value:"\xcdndices",id:"\xedndices",level:3}],p={toc:d},c="wrapper";function u(e){let{components:n,...a}=e;return(0,t.kt)(c,(0,o.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"mongodb"},"MongoDB"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://www.mongodb.com/"},"MongoDB")," es quiz\xe1 la base de datos ",(0,t.kt)("strong",{parentName:"p"},"no relacional")," m\xe1s popular de la actualidad. Est\xe1 dise\xf1ada para manejar grandes cantidades de datos distribu\xeddos en varios servidores."),(0,t.kt)("p",null,"MongoDB es gratis y de c\xf3digo abierto. Sin embargo existe una versi\xf3n paga con mayor soporte para despliegues m\xe1s complejos (para empresas que est\xe9n dispuestas a pagar)."),(0,t.kt)("h2",{id:"conceptos"},"Conceptos"),(0,t.kt)("p",null,"Los conceptos m\xe1s importantes de MongoDB son la ",(0,t.kt)("strong",{parentName:"p"},"base de datos"),", la ",(0,t.kt)("strong",{parentName:"p"},"colecci\xf3n")," y el ",(0,t.kt)("strong",{parentName:"p"},"documento"),":"),(0,t.kt)("h3",{id:"base-de-datos"},"Base de datos"),(0,t.kt)("p",null,"En MongoDB una base de datos es una conjunto de ",(0,t.kt)("strong",{parentName:"p"},"colecciones"),". Un servidor de MongoDB generalmente contiene muchas base de datos."),(0,t.kt)("h3",{id:"colecci\xf3n"},"Colecci\xf3n"),(0,t.kt)("p",null,"Una colecci\xf3n es un grupo de documentos. Es lo equivalente a una ",(0,t.kt)("strong",{parentName:"p"},"tabla")," en una base de datos relacional."),(0,t.kt)("h3",{id:"documento"},"Documento"),(0,t.kt)("p",null,"Un documento es un conjunto de llaves y valores que se almacena en un formato llamado BSON (Binary JSON). BSON es muy similar a JSON (JavaScript Object Notation) pero con algunos tipos adicionales que no son soportados en JSON."),(0,t.kt)("p",null,"Un documento es el equivalente a un ",(0,t.kt)("strong",{parentName:"p"},"registro")," de una tabla en una base de datos relacional."),(0,t.kt)("p",null,"A diferencia de una tabla, en donde todos los registros tienen las mismas columnas, en MongoDB cada documento puede contener diferentes llaves (columnas)."),(0,t.kt)("p",null,"Veamos un ejemplo de un documento que representar\xeda un post de un blog:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-text"},"{\n   title: 'MongoDB Overview',\n   description: 'MongoDB is a NoSQL database',\n   by: 'Germ\xe1n Escobar',\n   url: '/mongodb-overview',\n   tags: ['mongodb', 'database', 'nosql'],\n   likes: 100,\n   comments: [\n      {\n         user: 'user1',\n         message: 'My first comment',\n         dateCreated: new Date(2018,1,20,2,15),\n         like: 0\n      },\n      {\n         user: 'user2',\n         message: 'My second comments',\n         dateCreated: new Date(2018,1,25,7,45),\n         like: 5\n      }\n   ]\n}\n")),(0,t.kt)("p",null,"F\xedjate que los comentarios est\xe1n incluidos en el documento. En una base de datos relacional tendr\xedamos otra tabla para los comentarios, pero en MongoDB cada documento es independiente de los dem\xe1s, as\xed que es normal ver documentos con estructuras complejas como en este ejemplo."),(0,t.kt)("h2",{id:"instalaci\xf3n"},"Instalaci\xf3n"),(0,t.kt)("p",null,"Puedes descargar, instalar y ejecutar MongoDB en tu m\xe1quina o puedes utilizar un servicio como ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," que te permite crear instancias de MongoDB en la nube."),(0,t.kt)("p",null,"Sin embargo, as\xed quieras utilizar ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," vas a necesitar instalar el cliente de MongoDB, llamado ",(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("inlineCode",{parentName:"strong"},"mongo")," shell"),", que nos va a permitir interactuar con el servidor de MongoDB."),(0,t.kt)("h3",{id:"instalaci\xf3n-local"},"Instalaci\xf3n local"),(0,t.kt)("p",null,"Para instalar y ejecutar MongoDB en tu m\xe1quina localmente sigue las instrucciones que se encuentran en ",(0,t.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/administration/install-community/"},"este enlace"),"."),(0,t.kt)("p",null,"Una vez hayas instalado el servidor puedes utilizar el cliente de MongoDB, llamado el ",(0,t.kt)("inlineCode",{parentName:"p"},"mongo")," shell, para conectarte al servidor ejecutando el siguiente comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"$ mongo\n")),(0,t.kt)("p",null,"Si funciona bien deber\xedas ver algo parecido a lo siguiente, inmediatamente despu\xe9s de ejecutar el comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"MongoDB shell version v3.6.4\nconnecting to: mongodb://127.0.0.1:27017\nMongoDB server version: 3.6.4\n... m\xe1s l\xedneas\n>\n")),(0,t.kt)("p",null,"La \xfaltima l\xednea es el ",(0,t.kt)("inlineCode",{parentName:"p"},"prompt")," en donde podr\xe1s empezar a ejecutar los comandos de MongoDB."),(0,t.kt)("p",null,"Para salir ejecuta:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> exit\n")),(0,t.kt)("h3",{id:"mlab"},"mLab"),(0,t.kt)("p",null,"Si deseas utilizar ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," debes seguir las intrucciones de la secci\xf3n anterior, pero no necesitas ejecutar el servidor, s\xf3lo aseg\xfarate que el siguiente comando funcione:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"$ mongo --version\n")),(0,t.kt)("p",null,"La primera l\xednea deber\xeda ser parecida a la siguiente (la versi\xf3n puede ser diferente):"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"MongoDB shell version v3.6.4\n")),(0,t.kt)("p",null,"El siguiente paso es ingresar a ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," y crear una cuenta."),(0,t.kt)("p",null,"Una vez tengas una cuenta en ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," crea un nuevo ",(0,t.kt)("strong",{parentName:"p"},"MongoDB Deployment")," desde la aplicaci\xf3n Web seleccionando las siguientes opciones:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Cloud Provider: Amazon Web Services"),(0,t.kt)("li",{parentName:"ul"},"Plan Type: Sandbox (Free)")),(0,t.kt)("p",null,"Si te pregunta por una regi\xf3n utiliza la primera que aparezca, generalmente ",(0,t.kt)("strong",{parentName:"p"},"US East (Virginia)"),"."),(0,t.kt)("p",null,"Nombra la base de datos, por ejemplo ",(0,t.kt)("inlineCode",{parentName:"p"},"personal-test"),", y finaliza el proceso. Te deber\xe1 aparecer un nuevo ",(0,t.kt)("strong",{parentName:"p"},"MongoDB Deployment"),"."),(0,t.kt)("p",null,"Haz click sobre la base de datos que acabas de crear y busca la opci\xf3n ",(0,t.kt)("strong",{parentName:"p"},"Users"),". Selecci\xf3nala y crea un nuevo usuario."),(0,t.kt)("p",null,"Identifica el comando de conexi\xf3n que debe ser parecido al siguiente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"mongo ds111430.mlab.com:11430/personal-test -u <dbuser> -p <dbpassword>\n")),(0,t.kt)("p",null,"C\xf3pialo y p\xe9galo en tu l\xednea de comandos reemplazando ",(0,t.kt)("inlineCode",{parentName:"p"},"<dbuser>")," y ",(0,t.kt)("inlineCode",{parentName:"p"},"<dbpassword>")," con las credenciales que ingresaste."),(0,t.kt)("p",null,"Si funciona bien deber\xedas ver algo parecido a lo siguiente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"MongoDB shell version v3.6.4\nconnecting to: mongodb://ds111430.mlab.com:11430/personal-test\nMongoDB server version: 3.4.14\nWARNING: shell and server versions do not match\nrs-ds111430:PRIMARY>\n")),(0,t.kt)("p",null,"La \xfaltima l\xednea es el ",(0,t.kt)("inlineCode",{parentName:"p"},"prompt")," en donde podr\xe1s empezar a ejecutar los comandos de MongoDB."),(0,t.kt)("p",null,"Para salir ejecuta:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> exit\n")),(0,t.kt)("h2",{id:"utilizando-el-mongo-shell"},"Utilizando el ",(0,t.kt)("inlineCode",{parentName:"h2"},"mongo")," Shell"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"mongo")," shell es la aplicaci\xf3n de consola que te permite conectarte con el servidor de MongoDB, interactuar con los datos y realizar tareas administrativas."),(0,t.kt)("p",null,"Aseg\xfarate de estar conectado al ",(0,t.kt)("inlineCode",{parentName:"p"},"mongo")," shell de acuerdo a las instrucciones en la secci\xf3n anterior."),(0,t.kt)("p",null,"Vamos a ver las tareas m\xe1s comunes que puedes hacer con el ",(0,t.kt)("inlineCode",{parentName:"p"},"mongo")," shell:"),(0,t.kt)("h3",{id:"creando-y-seleccionando-bases-de-datos"},"Creando y seleccionando bases de datos"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"Nota:")," Esta secci\xf3n s\xf3lo aplica para una instalaci\xf3n local, en ",(0,t.kt)("a",{parentName:"p",href:"https://mlab.com/"},"mLab")," creas la base de datos a trav\xe9s de la aplicaci\xf3n Web."),(0,t.kt)("p",null,"Para mostrar la base de datos que est\xe1s utilizando ejecuta el siguiente comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db\n")),(0,t.kt)("p",null,"Para cambiar de base de datos utiliza el comando ",(0,t.kt)("inlineCode",{parentName:"p"},"use"),". Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> use mydatabase\n")),(0,t.kt)("p",null,"Para listar las bases de datos existentes utiliza el comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> show dbs\n")),(0,t.kt)("p",null,"Para crear bases de datos s\xf3lo debes utilizarla:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> use newdatabase\n")),(0,t.kt)("p",null,"Sin embargo, la base de datos no va a ser creada hasta que no creemos una colecci\xf3n o insertemos un documento."),(0,t.kt)("p",null,"Para eliminar una base de datos utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.dropDatabase"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.dropDatabase();\n")),(0,t.kt)("h3",{id:"creando-colecciones-y-documentos"},"Creando colecciones y documentos"),(0,t.kt)("p",null,"Para crear una colecci\xf3n utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.createCollection"),". Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.createCollection("users");\n')),(0,t.kt)("p",null,"Para listar las colecciones utiliza el siguiente comando:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> show collections\n")),(0,t.kt)("p",null,"Para insertar un documento en una colecci\xf3n utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.insertOne"),". Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.insertOne({ email: "pedro@example.com", name: "Pedro Perez", age: 35 });\n')),(0,t.kt)("p",null,"Deber\xedas ver un resultado similar al siguiente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'{\n    "acknowledged" : true,\n    "insertedId" : ObjectId("5aea08739b3eae8fd48323e3")\n}\n')),(0,t.kt)("p",null,"Cada documento tiene una llave ",(0,t.kt)("inlineCode",{parentName:"p"},"_id")," que identifica el documento de forma \xfanica en esa colecci\xf3n. Si no especificamos el ",(0,t.kt)("inlineCode",{parentName:"p"},"_id")," MongoDB le asigna uno autom\xe1ticamente. El ",(0,t.kt)("inlineCode",{parentName:"p"},"_id")," puede ser:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Un ",(0,t.kt)("inlineCode",{parentName:"li"},"ObjectId")," (esto es el que utiliza MongoDB para generar un identificador \xfanico)"),(0,t.kt)("li",{parentName:"ul"},"Una forma de identificar el objeto de forma natural (como el n\xfamero de identificaci\xf3n de la persona)."),(0,t.kt)("li",{parentName:"ul"},"Un n\xfamero que se vaya incrementando.")),(0,t.kt)("p",null,"La forma que recomendamos es dejar que MongoDB genere el ",(0,t.kt)("inlineCode",{parentName:"p"},"_id")," autom\xe1ticamente."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"Nota:")," Si la colecci\xf3n ",(0,t.kt)("inlineCode",{parentName:"p"},"users")," no existiera, ser\xeda creada autom\xe1ticamente al insertar el documento."),(0,t.kt)("p",null,"Tambi\xe9n existe el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"insert")," que permite insertar uno o m\xe1s documentos:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.insert([\n    { email: "juan@example.com", name: "Juan Gomez", age: 19 },\n    { email: "maria@example.com", name: "Maria Diaz", age: 27 }\n  ]);\n')),(0,t.kt)("h3",{id:"listando-y-filtrando-documentos"},"Listando y filtrando documentos"),(0,t.kt)("p",null,"Para listar documentos dentro de una colecci\xf3n utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.find"),". Por defecto, si no le pasas ning\xfan par\xe1metro a este m\xe9todo retorna todos los registros de la colecci\xf3n. Por ejemplo, para listar todos los documentos de la colecci\xf3n ",(0,t.kt)("inlineCode",{parentName:"p"},"users")," ingresa lo siguiente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.find({});\n")),(0,t.kt)("p",null,"Para buscar documentos por uno o m\xe1s campo espec\xedficos le puedes pasar un objeto con las llaves y los valores por los que quieras buscar. Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.find({ _id: 5 });\n> db.users.find({ email: "pedro@example.com" });\n')),(0,t.kt)("p",null,"Tambi\xe9n es posible buscar documentos que cumplan m\xe1s de una condici\xf3n puedes separar las expresiones por coma o utilizar el operador ",(0,t.kt)("inlineCode",{parentName:"p"},"$and"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.find({ name: "Pedro Perez", age: 20 });\n> db.users.find({ $and: [{ name: "Pedro Perez" }, { age: 20 }] });\n')),(0,t.kt)("p",null,"Por \xfaltimo, si quieres buscar documentos que cumplan una condici\xf3n u otra utiliza el operador ",(0,t.kt)("inlineCode",{parentName:"p"},"$or"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.find({ $or: [{ name: "Pedro Perez" }, { age: 20 }] });\n')),(0,t.kt)("p",null,"Si los valores son de la misma llave es preferible utilizar el operador ",(0,t.kt)("inlineCode",{parentName:"p"},"$in"),". Por ejemplo, la siguiente l\xednea encontrar\xeda todos los documentos con ",(0,t.kt)("inlineCode",{parentName:"p"},"email"),' igual a "',(0,t.kt)("a",{parentName:"p",href:"mailto:pedro@example.com"},"pedro@example.com"),'" o "',(0,t.kt)("a",{parentName:"p",href:"mailto:maria@example.com"},"maria@example.com"),'":'),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.find({ email: { $in: ["pedro@example.com", "maria@example.com"] } });\n')),(0,t.kt)("p",null,"Para comparar valores utiliza los operadores ",(0,t.kt)("inlineCode",{parentName:"p"},"$gt")," (mayor qu\xe9), ",(0,t.kt)("inlineCode",{parentName:"p"},"$gte")," (igual o mayor qu\xe9), ",(0,t.kt)("inlineCode",{parentName:"p"},"$lt")," (menor qu\xe9), ",(0,t.kt)("inlineCode",{parentName:"p"},"$lte")," (igual o menor qu\xe9):"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.find({ age: { $gt: 20 } });\n> db.users.find({ age: { $lt: 30 } });\n> db.users.find({ age: { $gte: 20, $lte: 30 } });\n")),(0,t.kt)("p",null,"Para buscar en documentos embebidos utiliza la notaci\xf3n ",(0,t.kt)("inlineCode",{parentName:"p"},".")," (punto). Imagina que tenemos documentos de este tipo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'{\n  name: { first: "Pedro", last: "Perez" }\n}\n')),(0,t.kt)("p",null,'Si queremos encontrar los documentos que tengan primer nombre "Pedro" utilizar\xedamos la siguiente l\xednea:'),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.find({ "name.first": "Pedro" });\n')),(0,t.kt)("h3",{id:"actualizando-un-documento"},"Actualizando un documento"),(0,t.kt)("p",null,"Para actualizar un documento utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.updateOne"),", que recibe un filtro y los campos que se quieren actualizar. Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.users.updateOne({ _id: 5 }, { $set: { email: "daniel@example.com", name: "Daniel Gael" } });\n')),(0,t.kt)("p",null,"Por defecto ",(0,t.kt)("inlineCode",{parentName:"p"},"updateOne")," actualiza el primer documento que coincida con el filtro. Para actualizar todos los documentos que coincidan utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.update"),"."),(0,t.kt)("h3",{id:"eliminando-un-documento"},"Eliminando un documento"),(0,t.kt)("p",null,"Para eliminar documentos de una colecci\xf3n utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.remove"),", que recibe un filtro de los documentos que se quieren eliminar:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.remove({ age: { $lt: 20 } });\n")),(0,t.kt)("p",null,"Para eliminar ",(0,t.kt)("strong",{parentName:"p"},"todos")," los documentos de una colecci\xf3n puedes pasarle un objeto vac\xedo al m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.remove"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.remove({});\n")),(0,t.kt)("h3",{id:"ordenar-y-agregar-documentos"},"Ordenar y agregar documentos"),(0,t.kt)("p",null,"Los m\xe9todos y operadores de agregaci\xf3n nos permiten agrupar, contar, sumar y ordenar documentos, entre otras operaciones."),(0,t.kt)("p",null,"Quiz\xe1 la operaci\xf3n de agregaci\xf3n m\xe1s com\xfan es contar el n\xfamero de documentos en una colecci\xf3n:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.count({});\n")),(0,t.kt)("p",null,"Para agrupar registros utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.aggregate")," y los operadores ",(0,t.kt)("inlineCode",{parentName:"p"},"$group")," y ",(0,t.kt)("inlineCode",{parentName:"p"},"$sum"),", entre otros. Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'> db.orders.aggregate([{\n  $group: {\n    _id: "$productId",\n    count: { $sum: 1 },\n    total: { $sum: "$amount" }\n  }\n}]);\n')),(0,t.kt)("p",null,"Tambi\xe9n puedes ordenar los documentos con el mismo m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"aggregate")," y el operador ",(0,t.kt)("inlineCode",{parentName:"p"},"$sort"),". Por ejemplo, el siguiente comandos devolver\xeda todas las ",(0,t.kt)("inlineCode",{parentName:"p"},"orders")," ordenadas por ",(0,t.kt)("inlineCode",{parentName:"p"},"date")," de forma descendente:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.orders.aggregate([{ $sort: { date: -1 } }]);\n")),(0,t.kt)("p",null,"1 es ascendente, -1 descendente."),(0,t.kt)("p",null,"Por \xfaltimo, puedes limitar el n\xfamero de registros con ",(0,t.kt)("inlineCode",{parentName:"p"},"$limit")," o saltarlos con ",(0,t.kt)("inlineCode",{parentName:"p"},"$skip"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.orders.aggregate([\n    { $skip: 5 },\n    { $limit: 10 }\n  ]);\n")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"aggregate")," recibe un arreglo de objetos. Cada uno de los objetos va realizando una nueva operaci\xf3n sobre los datos. A esto se le conoce como el ",(0,t.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/aggregation/#aggregation-pipeline"},"pipeline de agregaci\xf3n"),"."),(0,t.kt)("p",null,"Existen otros operadores que puedes consultar en la ",(0,t.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/"},"documentaci\xf3n oficial de MongoDB"),"."),(0,t.kt)("h3",{id:"\xedndices"},"\xcdndices"),(0,t.kt)("p",null,"Los \xedndices permiten acelerar la b\xfasqueda de documentos por llaves diferentes a la primaria (",(0,t.kt)("inlineCode",{parentName:"p"},"_id"),")."),(0,t.kt)("p",null,"Para crear un \xedndice utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.createIndex"),". Por ejemplo, para crear un \xedndice ascendente sobre el campo ",(0,t.kt)("inlineCode",{parentName:"p"},"age")," de la colecci\xf3n ",(0,t.kt)("inlineCode",{parentName:"p"},"users"),":"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"db.users.createIndex({ age: 1 });\n")),(0,t.kt)("p",null,"Para crear un \xedndice descendente utiliza un valor de -1."),(0,t.kt)("p",null,"Para obtener los \xedndices de una colecci\xf3n utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.getIndexes()"),". Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.getIndexes();\n")),(0,t.kt)("p",null,"Para remover un \xedndice utiliza el m\xe9todo ",(0,t.kt)("inlineCode",{parentName:"p"},"db.<collection>.dropIndex"),". Por ejemplo:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"> db.users.dropIndex({ age: 1 });\n")))}u.isMDXComponent=!0}}]);