"use strict";(self.webpackChunkmir_guia=self.webpackChunkmir_guia||[]).push([[9044],{3905:(e,a,n)=>{n.d(a,{Zo:()=>u,kt:()=>g});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},u=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},d=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return n?t.createElement(g,i(i({ref:a},u),{},{components:n})):t.createElement(g,i({ref:a},u))}));function g(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6879:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var t=n(7462),r=(n(7294),n(3905));const o={},i="Carga de Im\xe1genes",l={unversionedId:"react/carga-de-imagenes",id:"react/carga-de-imagenes",title:"Carga de Im\xe1genes",description:"Existen dos formas de cargar im\xe1genes desde nuestra aplicaci\xf3n de React:",source:"@site/docs/react/carga-de-imagenes.md",sourceDirName:"react",slug:"/react/carga-de-imagenes",permalink:"/docs/react/carga-de-imagenes",draft:!1,editUrl:"https://github.com/makeitrealcamp/new-guides/tree/main/docs/react/carga-de-imagenes.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Context",permalink:"/docs/react/context"},next:{title:"React Bootstrap",permalink:"/docs/react/react-bootstrap"}},s={},c=[{value:"Crear una vista previa de la imagen antes de cargar",id:"crear-una-vista-previa-de-la-imagen-antes-de-cargar",level:3},{value:"Transformaciones",id:"transformaciones",level:2}],u={toc:c},p="wrapper";function m(e){let{components:a,...n}=e;return(0,r.kt)(p,(0,t.Z)({},u,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"carga-de-im\xe1genes"},"Carga de Im\xe1genes"),(0,r.kt)("p",null,"Existen dos formas de cargar im\xe1genes desde nuestra aplicaci\xf3n de React:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enviar la imagen a un backend para cargarla a un servicio de almacenamiento como ",(0,r.kt)("a",{parentName:"li",href:"https://cloudinary.com/"},"Cloudinary"),", Dropbox o S3."),(0,r.kt)("li",{parentName:"ul"},"Enviar la imagen directamente al servicio de almacenamiento (aunque para algunos servicios como S3 necesitamos un backend para generar un token).")),(0,r.kt)("p",null,"En esta gu\xeda vamos a ver c\xf3mo cargar archivos directamente a ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/"},"Cloudinary")," sin necesidad de pasar por el backend."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Nota:")," ",(0,r.kt)("a",{parentName:"p",href:"https://support.cloudinary.com/hc/en-us/articles/208335975-How-safe-secure-is-it-to-use-unsigned-upload-from-web-browsers-or-mobile-clients"},"Seg\xfan Cloudinary"),", aunque es posible que alguien copie el c\xf3digo y utilice nuestra cuenta para subir im\xe1genes, en la pr\xe1ctica esto no es muy com\xfan que ocurra. Si esto es una preocupaci\xf3n ser\xeda mejor ",(0,r.kt)("a",{parentName:"p",href:"/docs/nodejs/express/avanzado/carga-de-imagenes"},"cargar la imagen desde el backend")," o ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/documentation/upload_images#generating_authentication_signatures"},"generar una firma de autenticaci\xf3n desde el backend"),". En esta gu\xeda vamos a hacer la carga directa."),(0,r.kt)("p",null,"Para continuar necesitas una cuenta en ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/"},"Cloudinary")," y obtener los siguientes datos que encontrar\xe1s en el Dashboard (una vez ingreses a tu cuenta):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"El Cloud Name."),(0,r.kt)("li",{parentName:"ul"},"El API Key.")),(0,r.kt)("p",null,"Tambi\xe9n necesitas habilitar las cargas no firmadas en la configuraci\xf3n creando un ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/documentation/upload_presets"},"Upload Preset como se explica en esta secci\xf3n de la documentaci\xf3n"),"."),(0,r.kt)("p",null,"Para cargar una imagen a Cloudinary necesitas realizar dos pasos:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Agregar el campo tipo "file" y almacenar el archivo en el estado del componente.'),(0,r.kt)("li",{parentName:"ol"},"Agregar un bot\xf3n que cargue el archivo a Cloudinary.")),(0,r.kt)("p",null,"Para el primer paso podemos agregar el campo de la siguiente manera:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function App() {\n  const [file, setFile] = useState(null);\n\n  return (\n    <>\n      <input type="file" onChange={(e) => setFile(e.target.files[0])}></input>\n    </>\n  )\n}\n')),(0,r.kt)("p",null,"Ahora agregamos el bot\xf3n y una funci\xf3n que va a cargar el archivo a ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/"},"Cloudinary"),". El ejemplo completo quedar\xeda de la siguiente forma:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function App() {\n  const [file, setFile] = useState(null);\n\n  const CLOUD_NAME = "CLOUD_NAME"\n  const UPLOAD_PRESET = "UPLOAD_PRESET"\n\n  const upload = async () => {\n    const data = new FormData();\n    data.append("file", file);\n    data.append("upload_preset", CLOUD_NAME);\n    const response = await fetch(`https://api.cloudinary.com/v1_1/${UPLOAD_PRESET}/upload`,\n        { method: "POST", body: data })\n    const data = await response.json()\n    console.log(data) // reemplazar con un mensaje de \xe9xito o la acci\xf3n deseada\n  };\n\n  return (\n    <div className="App">\n      <input type="file" onChange={(e) => setFile(e.target.files[0])}></input>\n      <button onClick={upload}>Upload</button>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"Para m\xe1s informaci\xf3n sobre la carga de im\xe1genes en ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/"},"Cloudinary")," te recomendamos ",(0,r.kt)("a",{parentName:"p",href:"https://cloudinary.com/documentation/image_upload_api_reference"},"la documentaci\xf3n oficial"),"."),(0,r.kt)("h3",{id:"crear-una-vista-previa-de-la-imagen-antes-de-cargar"},"Crear una vista previa de la imagen antes de cargar"),(0,r.kt)("p",null,"Es posible crear una vista previa de la imagen utilizando el m\xe9todo ",(0,r.kt)("inlineCode",{parentName:"p"},"URL.createObjectURL"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function App() {\n  const [file, setFile] = useState(null)\n\n  // ...\n\n  return (\n    <input type="file" onChange={(e) => setFile(e.target.files[0])}></input>\n    { file ? <img alt="Preview" height="60" src={URL.createObjectURL(file)} /> : null }\n    ...\n  )\n}\n')),(0,r.kt)("h2",{id:"transformaciones"},"Transformaciones"),(0,r.kt)("p",null,"Una funcionalidad muy interesante de Cloudinary es que podemos realizar transformaciones a nuestras im\xe1genes. Estas transformaciones son procesadas en los servidores de Cloudinary y tienen un costo (despu\xe9s de un generoso plan gratuito)."),(0,r.kt)("p",null,"Algunas transformaciones posibles son las siguientes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Tama\xf1o (escalar, limitar, llenar, cortar, etc.)"),(0,r.kt)("li",{parentName:"ul"},"Ubicar texto u otras im\xe1genes como marcas de agua."),(0,r.kt)("li",{parentName:"ul"},"Efectos, filtros y otras mejoras art\xedsticas."),(0,r.kt)("li",{parentName:"ul"},"Detecci\xf3n de caras.")),(0,r.kt)("p",null,"La forma m\xe1s f\xe1cil de realizar transformaciones es enviarlas como parte el URL de la imagen. Por ejemplo, si tenemos una imagen llamada ",(0,r.kt)("inlineCode",{parentName:"p"},"sample.jpg")," podemos cambiar el tama\xf1o a un ancho de 100px con la siguiente URL:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://res.cloudinary.com/<cloud_name>/c_crop,w_100/sample.jpg\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Nota:")," No olvides reemplazar ",(0,r.kt)("inlineCode",{parentName:"p"},"<cloud_name>")," por el valor real."))}m.isMDXComponent=!0}}]);